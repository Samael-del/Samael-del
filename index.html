<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Current Affairs Quiz</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #4a90e2, #50e3c2);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    max-height: 600px;
    padding: 10px;
  }
  #app {
    background: white;
    border-radius: 12px;
    width: 100%;
    max-width: 350px;
    height: 100%;
    max-height: 600px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    overflow: hidden;
  }
  header {
    background: #00796B;
    color: white;
    padding: 15px 20px;
    font-weight: 600;
    font-size: 1.25rem;
    text-align: center;
    letter-spacing: 1px;
  }
  main {
    padding: 20px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  #question-number {
    font-size: 0.9rem;
    color: #555;
    margin-bottom: 6px;
    text-align: center;
  }
  #question-text {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 15px;
    text-align: center;
    line-height: 1.3;
    min-height: 65px;
  }
  #answers {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  button.answer {
    background: #f0f0f0;
    border: 2px solid transparent;
    padding: 12px 15px;
    border-radius: 10px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
  }
  button.answer:hover {
    background: #80cbc4;
    color: white;
  }
  button.answer.correct {
    background: #4caf50;
    border-color: #388e3c;
    color: white;
    cursor: default;
  }
  button.answer.wrong {
    background: #e57373;
    border-color: #c62828;
    color: white;
    cursor: default;
  }
  #feedback {
    margin-top: 15px;
    font-weight: 600;
    font-size: 1rem;
    text-align: center;
    min-height: 24px;
  }
  #next-btn, #start-btn {
    background: #00796B;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 12px 20px;
    font-size: 1.1rem;
    cursor: pointer;
    margin-top: 20px;
    align-self: center;
    width: 100%;
    max-width: 200px;
    transition: background 0.3s ease;
  }
  #next-btn:hover, #start-btn:hover {
    background: #004d40;
  }
  #score-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
    text-align: center;
  }
  #score-container h2 {
    font-size: 2rem;
    color: #00796B;
    margin-bottom: 10px;
  }
  #score-container p {
    font-size: 1.1rem;
    margin-bottom: 20px;
    color: #004d40;
  }
  #retry-btn {
    background: #00796B;
    color: #ebe9ec;
    border: none;
    border-radius: 10px;
    padding: 12px 20px;
    font-size: 1.1rem;
    cursor: pointer;
    width: 100%;
    max-width: 200px;
    transition: background 0.3s ease;
  }
#retry-btn:hover {
    background: #1bd1b3;
}

/* General Knowledge Theme */
body {
    background: linear-gradient(135deg, #ff9800, #ffc107);
}
header {
    background: #ff5722;
}
button.answer:hover {
    background: #ffcc80;
    color: #000;
}
#next-btn, #start-btn, #retry-btn {
    background: #ff5722;
}
#next-btn:hover, #start-btn:hover, #retry-btn:hover {
    background: #e64a19;
}

/* Responsive fixes */
@media (max-height: 600px) {
    #app {
        height: 100vh;
        max-height: none;
        border-radius: 0;
        box-shadow: none;
    }
  }
</style>
</head>
<body>
  <div id="app" role="main" aria-live="polite" aria-atomic="true">
    <header>Current Affairs Quiz</header>
    <main>
      <div id="start-container">
        <button id="start-btn" aria-label="Start Current Affairs Quiz">Start Quiz</button>
      </div>
      <div id="quiz-container" hidden>
        <div id="question-number"></div>
        <div id="question-text"></div>
        <div id="answers" role="list"></div>
        <div id="feedback" aria-live="assertive" aria-atomic="true"></div>
        <button id="next-btn" hidden aria-label="Next Question">Next Question</button>
      </div>
      <div id="score-container" hidden>
        <h2>Quiz Finished!</h2>
        <p>Your Score: <span id="score"></span> / <span id="total-questions"></span></p>
        <button id="retry-btn" aria-label="Retry Quiz">Retry Quiz</button>
      </div>
    </main>
  </div>

<script>
  const startBtn = document.getElementById('start-btn');
  const quizContainer = document.getElementById('quiz-container');
  const startContainer = document.getElementById('start-container');
  const questionNumberElem = document.getElementById('question-number');
  const questionTextElem = document.getElementById('question-text');
  const answersElem = document.getElementById('answers');
  const feedbackElem = document.getElementById('feedback');
  const nextBtn = document.getElementById('next-btn');
  const scoreContainer = document.getElementById('score-container');
  const scoreElem = document.getElementById('score');
  const totalQuestionsElem = document.getElementById('total-questions');
  const retryBtn = document.getElementById('retry-btn');

  let questions = [];
  let currentQuestionIndex = 0;
  let score = 0;
  let answered = false;

  // Helper: decode HTML entities from API
  function decodeHTML(html) {
    const txt = document.createElement('textarea');
    txt.innerHTML = html;
    return txt.value;
  }

  // Fisher-Yates shuffle
  function shuffleArray(array) {
    for(let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  // Fetch quiz questions from Open Trivia DB - General Knowledge 9 or 10 questions
  async function fetchQuestions() {
    // Use General Knowledge category (9); type multiple choice; 10 questions
    const url = 'https://opentdb.com/api.php?amount=10&category=9&type=multiple';
    try {
      const res = await fetch(url);
      const data = await res.json();
      if(data.response_code === 0) {
        return data.results.map(q => ({
          question: decodeHTML(q.question),
          correct_answer: decodeHTML(q.correct_answer),
          answers: shuffleArray([
            decodeHTML(q.correct_answer),
            ...q.incorrect_answers.map(ans => decodeHTML(ans))
          ])
        }));
      } else {
        throw new Error('Failed to load questions');
      }
    } catch(e) {
      alert('Error fetching questions. Please try again later.');
      return [];
    }
  }

  function showQuestion() {
    answered = false;
    feedbackElem.textContent = '';
    nextBtn.hidden = true;
    answersElem.innerHTML = '';

    if (currentQuestionIndex >= questions.length) {
      // No more questions, show score
      showScore();
      return;
    }

    const q = questions[currentQuestionIndex];
    questionNumberElem.textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
    questionTextElem.textContent = q.question;

    q.answers.forEach(answer => {
      const btn = document.createElement('button');
      btn.classList.add('answer');
      btn.type = 'button';
      btn.textContent = answer;
      btn.setAttribute('role', 'listitem');
      btn.addEventListener('click', () => {
        if (answered) return;
        answered = true;
        if (answer === q.correct_answer) {
          btn.classList.add('correct');
          feedbackElem.textContent = 'Correct! ðŸŽ‰';
          score++;
        } else {
          btn.classList.add('wrong');
          feedbackElem.textContent = `Wrong! Correct answer: ${q.correct_answer}`;
          // Highlight correct answer button
          Array.from(answersElem.children).forEach(child => {
            if (child.textContent === q.correct_answer) {
              child.classList.add('correct');
            }
          });
        }
        nextBtn.hidden = false;
      });
      answersElem.appendChild(btn);
    });
  }

  function showScore() {
    quizContainer.hidden = true;
    scoreContainer.hidden = false;
    scoreElem.textContent = score;
    totalQuestionsElem.textContent = questions.length;
  }

  function resetQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    quizContainer.hidden = false;
    scoreContainer.hidden = true;
    showQuestion();
  }

  startBtn.addEventListener('click', async () => {
    startBtn.disabled = true;
    startBtn.textContent = 'Loading...';
    questions = await fetchQuestions();
    if (questions.length > 0) {
      startContainer.hidden = true;
      quizContainer.hidden = false;
      showQuestion();
    }
    startBtn.disabled = false;
    startBtn.textContent = 'Start Quiz';
  });

  nextBtn.addEventListener('click', () => {
    currentQuestionIndex++;
    showQuestion();
  });

  retryBtn.addEventListener('click', () => {
    resetQuiz();
  });
</script>
</body>
</html>

<!-- End of quiz.html -->
<!-- This HTML file contains a simple current affairs quiz application. It fetches questions from the Open Trivia DB API, displays them to the user, and allows them to answer. The user's score is displayed at the end of the quiz. The design is responsive and uses CSS for styling. The JavaScript handles the logic for fetching questions, displaying them, and managing user interactions. -->